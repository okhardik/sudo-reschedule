<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Postman Runner: v2_reschedule</title>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;600&family=Fira+Code:wght@400;500&display=swap" rel="stylesheet">
    <style>
        /* BASE & MOBILE FIXES */
        body {
            margin: 0; padding: 0;
            height: 100dvh; /* Mobile viewport fix */
            width: 100vw;
            overflow: hidden;
            background-color: #212121; /* Postman dark theme */
            transition: background 1.5s ease;
            -webkit-tap-highlight-color: transparent;
        }

        /* --- API RUNNER (BACKEND) UI --- */
        #api-console {
            position: absolute;
            top: 0; left: 0; width: 100%; height: 100%;
            padding: 15px;
            box-sizing: border-box;
            color: #d4d4d4;
            font-family: 'Fira Code', monospace;
            font-size: 13px; /* Optimized for mobile readability */
            line-height: 1.5;
            overflow-y: auto;
            transition: opacity 1s ease, transform 1s ease;
            z-index: 10;
        }

        #api-console::-webkit-scrollbar { width: 6px; }
        #api-console::-webkit-scrollbar-track { background: #212121; }
        #api-console::-webkit-scrollbar-thumb { background: #555; border-radius: 3px; }

        /* Syntax Highlighting */
        .log-header { color: #9e9e9e; font-size: 11px; margin-top: 15px; text-transform: uppercase; letter-spacing: 1px; }
        .method-post { color: #ffb300; font-weight: bold; } /* Postman orange */
        .url { color: #81d4fa; }
        .json-key { color: #9cdcfe; }
        .json-string { color: #ce9178; }
        .json-punct { color: #d4d4d4; }
        .status-401 { color: #ff9800; font-weight: bold; }
        .status-403 { color: #f44336; font-weight: bold; }
        .status-200 { color: #4caf50; font-weight: bold; }
        .sys-prompt { color: #fff; margin-top: 20px; font-weight: 500; }

        .line { margin-bottom: 4px; word-wrap: break-word; }
        .indent-1 { margin-left: 15px; }
        .indent-2 { margin-left: 30px; }

        /* Interactive Elements */
        #active-prompt-area { margin-top: 15px; display: none; }
        #hidden-input { opacity: 0; position: absolute; z-index: -100; top: -1000px; }
        
        .cursor {
            display: inline-block;
            width: 7px; height: 14px;
            background-color: #ffb300; /* Orange cursor */
            animation: blink 1s step-end infinite;
            vertical-align: middle;
            margin-left: 2px;
        }
        .cursor.typing { animation: none; opacity: 1; }
        @keyframes blink { 0%, 100% { opacity: 1; } 50% { opacity: 0; } }

        /* --- FRONTEND (ROMANTIC) UI --- */
        #frontend-container {
            position: absolute; top: 0; left: 0; width: 100%; height: 100%;
            display: flex; justify-content: center; align-items: center;
            opacity: 0; pointer-events: none;
            transition: opacity 1.5s ease;
            z-index: 20;
            font-family: 'Poppins', sans-serif;
        }

        .frontend-bg {
            background: linear-gradient(-45deg, #1e1b4b, #312e81, #0f172a, #4c1d95) !important;
            background-size: 400% 400% !important;
            animation: gradientBG 15s ease infinite !important;
        }

        @keyframes gradientBG {
            0% { background-position: 0% 50%; }
            50% { background-position: 100% 50%; }
            100% { background-position: 0% 50%; }
        }

        .glass-card {
            background: rgba(255, 255, 255, 0.05);
            backdrop-filter: blur(20px); -webkit-backdrop-filter: blur(20px);
            border: 1px solid rgba(255, 255, 255, 0.15);
            border-radius: 20px;
            padding: 2.5rem 1.5rem;
            width: 85%; max-width: 400px;
            text-align: center;
            box-shadow: 0 30px 60px -12px rgba(0, 0, 0, 0.5);
            transform: translateY(20px);
            transition: transform 1.5s cubic-bezier(0.16, 1, 0.3, 1);
            color: white;
        }

        .glass-card h1 { font-size: 3rem; margin: 0 0 5px 0; }
        .glass-card h2 { font-weight: 400; font-size: 1.2rem; margin-bottom: 1rem; color: #fbcfe8; line-height: 1.4; }
        .glass-card p { font-weight: 300; font-size: 0.95rem; color: #cbd5e1; margin-bottom: 2rem; }

        .btn-proceed {
            background: linear-gradient(135deg, #fb7185, #db2777);
            color: white; font-family: 'Poppins', sans-serif;
            font-size: 1rem; font-weight: 600;
            padding: 12px 28px; border-radius: 50px; border: none;
            cursor: pointer; width: 100%;
            box-shadow: 0 4px 15px rgba(219, 39, 119, 0.4);
            transition: all 0.3s ease;
            -webkit-appearance: none; /* iOS fix */
        }
        .btn-proceed:active { transform: scale(0.98); }

        .flower {
            position: fixed; pointer-events: none; z-index: 15;
            animation: floatUp ease-out forwards;
        }

        @keyframes floatUp {
            0% { transform: translateY(100vh) rotate(0deg) scale(0.5); opacity: 1; }
            100% { transform: translateY(-20vh) rotate(360deg) scale(1.5); opacity: 0; }
        }
    </style>
</head>
<body onclick="focusInput()">

    <!-- 1. API RUNNER UI -->
    <div id="api-console">
        <div id="log-output"></div>
        <div id="active-prompt-area">
            <span id="prompt-text" class="sys-prompt"></span><span id="user-typed" class="method-post"></span><span id="cursor" class="cursor"></span>
        </div>
        <input type="text" id="hidden-input" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false">
    </div>

    <!-- 2. FRONTEND UI -->
    <div id="frontend-container">
        <div class="glass-card" id="glass-card">
            <h1>ðŸŒ¸</h1>
            <h2>I hope the next ones I give you are real. ðŸŒ»</h2>
            <p>Shall we proceed with our date?</p>
            <button class="btn-proceed" onclick="goToMeet()">Yes, let's go â†’</button>
        </div>
    </div>

    <script>
        const logOutput = document.getElementById('log-output');
        const hiddenInput = document.getElementById('hidden-input');
        const userTyped = document.getElementById('user-typed');
        const promptText = document.getElementById('prompt-text');
        const activePromptArea = document.getElementById('active-prompt-area');
        const cursor = document.getElementById('cursor');

        // Mobile focus trick
        function focusInput() {
            if(document.getElementById('api-console').style.opacity !== '0') {
                hiddenInput.focus();
            }
        }

        const sleep = (ms) => new Promise(resolve => setTimeout(resolve, ms));

        function appendHTML(html) {
            const div = document.createElement('div');
            div.className = 'line';
            div.innerHTML = html;
            logOutput.appendChild(div);
            document.getElementById('api-console').scrollTop = logOutput.scrollHeight;
        }

        async function typeJSON(lines) {
            for (let line of lines) {
                appendHTML(line);
                await sleep(150);
            }
        }

        async function runPostmanScript() {
            appendHTML(`<span class="log-header">Runner Collection: Date_Recovery_Protocol</span>`);
            await sleep(600);
            appendHTML(`<span class="log-header">Environment: Production</span>`);
            await sleep(800);
            
            appendHTML(`<br><span class="method-post">POST</span> <span class="url">https://api.system.local/v2/reschedule</span>`);
            await sleep(500);

            appendHTML(`<div class="log-header">Request Body:</div>`);
            
            // JSON Payload
            const jsonBody = [
                `<span class="json-punct">{</span>`,
                `<div class="indent-1"><span class="json-key">"incident_type"</span><span class="json-punct">: </span><span class="json-string">"UNEXPECTED_URGENT_EXCEPTION"</span><span class="json-punct">,</span></div>`,
                `<div class="indent-1"><span class="json-key">"action_taken"</span><span class="json-punct">: </span><span class="json-string">"CODED_VIRTUAL_BOUQUET"</span><span class="json-punct">,</span></div>`,
                `<div class="indent-1"><span class="json-key">"security_protocol"</span><span class="json-punct">: </span><span class="json-string">"ASKING_ADDRESS_ON_DAY_ONE_IS_VULNERABILITY"</span><span class="json-punct">,</span></div>`,
                `<div class="indent-1"><span class="json-key">"developer_note"</span><span class="json-punct">: </span><span class="json-string">"I_HOPE_THE_NEXT_ONES_ARE_REAL_ðŸŒ»"</span></div>`,
                `<span class="json-punct">}</span>`
            ];
            await typeJSON(jsonBody);
            
            await sleep(800);
            appendHTML(`<br><span class="log-header">Sending Request...</span>`);
            await sleep(1200);

            appendHTML(`<span class="status-401">401 Unauthorized</span>`);
            appendHTML(`<span class="json-punct">Reason: Manual User Override Required.</span>`);
            await sleep(800);

            startInteractivePrompt();
        }

        let expectingInput = false;

        function startInteractivePrompt() {
            appendHTML(`<br>`);
            promptText.innerHTML = `[SYSTEM] Authorize execution of virtual_bouquet.js? [Y/N]: `;
            activePromptArea.style.display = "block";
            expectingInput = true;
            hiddenInput.value = "";
            userTyped.textContent = "";
            focusInput();
            document.getElementById('api-console').scrollTop = logOutput.scrollHeight;
        }

        hiddenInput.addEventListener('input', () => {
            if (!expectingInput) return;
            // Limit to 1 character for mobile typing cleanup
            const val = hiddenInput.value.trim().toUpperCase();
            userTyped.textContent = val.length > 0 ? val[val.length - 1] : "";
        });

        hiddenInput.addEventListener('keydown', async (e) => {
            if (!expectingInput) return;
            
            if (e.key === 'Enter') {
                const input = userTyped.textContent.toUpperCase();
                activePromptArea.style.display = "none";
                appendHTML(`<span class="sys-prompt">${promptText.textContent}</span><span class="method-post">${input}</span>`);
                expectingInput = false;

                if (input === 'N') {
                    await handleRejection();
                } else if (input === 'Y') {
                    await transitionToFrontend();
                } else {
                    appendHTML(`<span class="status-403">Error: Invalid input format.</span>`);
                    await sleep(400);
                    startInteractivePrompt();
                }
            }
        });

        async function handleRejection() {
            appendHTML(`<br><span class="status-403">403 Forbidden</span>`);
            const errJson = [
                `<span class="json-punct">{</span>`,
                `<div class="indent-1"><span class="json-key">"error"</span><span class="json-punct">: </span><span class="json-string">"HEART_OF_STONE"</span><span class="json-punct">,</span></div>`,
                `<div class="indent-1"><span class="json-key">"message"</span><span class="json-punct">: </span><span class="json-string">"I literally wrote frontend code for this... please?"</span></div>`,
                `<span class="json-punct">}</span>`
            ];
            await typeJSON(errJson);
            await sleep(1000);
            appendHTML(`<span class="log-header">Overriding rejection sequence...</span>`);
            await sleep(800);
            startInteractivePrompt();
        }

        async function transitionToFrontend() {
            appendHTML(`<br><span class="status-200">200 OK</span>`);
            appendHTML(`<span class="json-punct">{ "status": "Access Granted", "action": "Compiling UI" }</span>`);
            
            // Hide keyboard on mobile immediately
            hiddenInput.blur(); 
            
            await sleep(1000);

            // 1. Hide API Console
            const apiConsole = document.getElementById('api-console');
            apiConsole.style.transform = 'scale(1.1)';
            apiConsole.style.opacity = '0';

            // 2. Change background
            document.body.classList.add('frontend-bg');

            // 3. Show Frontend & throw flowers
            setTimeout(() => {
                apiConsole.style.display = 'none';
                const frontend = document.getElementById('frontend-container');
                frontend.style.pointerEvents = 'auto'; 
                frontend.style.opacity = '1';
                
                document.getElementById('glass-card').style.transform = 'translateY(0)';
                
                throwFlowers();
            }, 1000);
        }

        function throwFlowers() {
            const flowers = ['ðŸŒ¸', 'ðŸŒº', 'ðŸŒ»', 'ðŸŒ¹', 'ðŸŒ·'];
            for (let i = 0; i < 40; i++) {
                setTimeout(() => {
                    const flower = document.createElement('div');
                    flower.className = 'flower';
                    flower.innerText = flowers[Math.floor(Math.random() * flowers.length)];
                    flower.style.left = Math.random() * 100 + 'vw';
                    flower.style.animationDuration = (Math.random() * 3 + 4) + 's';
                    flower.style.fontSize = (Math.random() * 1.2 + 1.2) + 'rem';
                    document.getElementById('frontend-container').appendChild(flower);
                    setTimeout(() => flower.remove(), 7000);
                }, i * 80); 
            }
        }

        function goToMeet() {
            window.location.href = "https://meet.google.com/euz-vcxw-keb";
        }

        window.onload = runPostmanScript;

    </script>
</body>
</html>
